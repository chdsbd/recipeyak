#!/usr/bin/env bash
set -e

cd $(dirname $(dirname "$0"))

if [[ -f ../.env ]]; then
    # export all variables from env file
    set -a
    source ../.env
    set +a
fi

node scripts/lint.js

GLOB="^src.*\.(ts|tsx)$"

FILES=$(git diff --name-only master | sed -e "s%frontend/%%"| grep -E "$GLOB")

$(yarn bin)/tslint --project ./tsconfig.json --format 'codeFrame' $FILES

s/fmt --list-different

$(yarn bin)/tsc --noEmit
