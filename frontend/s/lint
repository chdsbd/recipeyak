#!/usr/bin/env bash
set -e

cd $(dirname $(dirname "$0"))

if [[ -f ../.env ]]; then
    # export all variables from env file
    set -a
    source ../.env
    set +a
fi

# find conflicting files, which happens because of our absolute path usage.
../backend/lints/find_conflicts src/ node_modules/

node scripts/lint.js

$(yarn bin)/tslint --project ./tsconfig.json 'src/**/*.{ts,tsx}' --format 'codeFrame'

s/fmt --list-different

$(yarn bin)/tsc --noEmit
