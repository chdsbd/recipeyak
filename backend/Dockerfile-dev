FROM python:3.6.4
ENV PYTHONUNBUFFERD 1

RUN apt-get update
RUN apt-get install netcat -y

# -- Install Poetry
RUN set -ex && curl -sSL https://raw.githubusercontent.com/sdispater/poetry/master/get-poetry.py | python

# -- Install Application into container:
RUN set -ex && mkdir /app

# -- Adding dependency files
COPY pyproject.toml pyproject.toml
COPY pyproject.lock pyproject.lock

# -- Install dependencies:
RUN set -ex && poetry install

WORKDIR /app

VOLUME ["/app"]
