FROM python:3.6
ENV PYTHONUNBUFFERD 1

RUN apt-get update
RUN apt-get install netcat -y

# https://github.com/kennethreitz/pipenv/blob/28cfe633c6dd81943cf84deac9f4d1daead68890/Dockerfile
# -- Install Pipenv:
RUN set -ex && pip install -I pipenv==9.0.3

# -- Install Application into container:
RUN set -ex && mkdir /app

WORKDIR /app

# https://github.com/pypa/pipenv/issues/1002
RUN ln -sf /usr/local/bin/python /bin/python

# -- Adding Pipfiles
COPY Pipfile Pipfile
COPY Pipfile.lock Pipfile.lock

# -- Install dependencies:
RUN set -ex && pipenv install --dev --system

WORKDIR /app

VOLUME ["/app"]
