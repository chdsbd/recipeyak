FROM recipeyak/base@sha256:8897faf71cb791feea88b1012db32d1b0d2970a2ffc722be9973f548af057bcd


# Install Application into container
RUN set -ex && mkdir -p /var/app

WORKDIR /var/app

# Adding dependency files
COPY pyproject.toml pyproject.toml
COPY poetry.lock poetry.lock

# Install our dev dependencies
RUN poetry install

COPY backend /var/app
ARG GIT_SHA
RUN poetry run yak build --api
