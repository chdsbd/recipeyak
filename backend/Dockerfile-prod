FROM recipeyak/base:v3


# Install Application into container
RUN set -ex && mkdir -p /var/app

WORKDIR /var/app

# Adding dependency files
COPY pyproject.toml pyproject.toml
COPY poetry.lock poetry.lock

# Install our dev dependencies
RUN poetry install

COPY backend /var/app
ARG GIT_SHA
RUN poetry run yak build --api
